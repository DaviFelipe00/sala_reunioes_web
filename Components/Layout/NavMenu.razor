@using MudBlazor
@using Microsoft.AspNetCore.Components.Authorization

<MudNavMenu Class="mt-4">
    @* Link Principal: Home / Agendamentos *@
    @* ALTERADO: Href="dashboard" para não conflitar com a nova tela de Login na raiz *@
    <MudNavLink Href="dashboard" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Outlined.SpaceDashboard">
        Agendamentos
    </MudNavLink>

    @* Link Público: Calendário Global *@
    <MudNavLink Href="calendario" Icon="@Icons.Material.Filled.CalendarMonth">
        Calendário
    </MudNavLink>

    @* --- SEÇÃO ADMINISTRATIVA (Com Proteção) --- *@
    <AuthorizeView>
        <Authorized>
            <MudDivider Class="my-2" DividerType="DividerType.Middle" />
            <MudText Typo="Typo.caption" Class="px-4 mt-2 mb-1" Color="Color.Inherit" Style="opacity: 0.5;">ADMINISTRAÇÃO</MudText>
            
            <MudNavLink Href="admin/salas" Icon="@Icons.Material.Filled.MeetingRoom">
                Gerenciar Salas
            </MudNavLink>

            @* Link para Configurações *@
            <MudNavLink Href="admin/configuracoes" Icon="@Icons.Material.Filled.AccessTime">
                Mudar horário
            </MudNavLink>
            
            <MudNavLink Href="admin/relatorios" Icon="@Icons.Material.Filled.BarChart">
                Relatórios
            </MudNavLink>
            
            @* O botão "Sair" fica no UserMenu (avatar) *@
        </Authorized>
        
        <NotAuthorized>
            @* Mantido conforme solicitado: Link para o login antigo de admin *@
            <MudDivider Class="my-2" DividerType="DividerType.Middle" />
            <MudNavLink Href="login" Icon="@Icons.Material.Filled.AdminPanelSettings">
                Acesso Admin
            </MudNavLink>
        </NotAuthorized>
    </AuthorizeView>

    @* ------------------------------------------- *@

    @* Link para o Perfil *@
    <MudNavLink Href="perfil" Icon="@Icons.Material.Filled.Person">
        Meu Perfil
    </MudNavLink>
</MudNavMenu>